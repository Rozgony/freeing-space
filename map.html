
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Freeing Spaces</title>
    <style>
	    path {
	        stroke: black;
	        stroke-width: 0.5px;
	    }
	</style>
	<script src="geoJSONs/custom.geo.js"></script>
	<script src="https://d3js.org/d3.v6.min.js"></script>
	<script src="http://d3js.org/topojson.v0.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/d3-tile@1"></script>
</head>
<body>
	<h1>Freeing Spaces</h1>
</body>
	<script>
		console.log({globe})

		if (globe) {
			const foundry = addFeature("Point",[-7.641724521729832,43.601181745652475],{freed: true});
			globe.features.push(foundry);
		}

		const width = 900;
		const height = 600;
		const svg = d3.select('body').append('svg')
					    .attr('width', width)
					    .attr('height', height);
		// const projection = d3.geoNaturalEarth1()
		const projection = d3.geoEqualEarth()
		    .translate([width / 2, height / 2]) // translate to center of screen
		    .scale([200]); // scale things down so see entire US
		 
		const path = d3.geoPath().projection(projection);

	    svg.selectAll('path')
	        .data(globe.features)
	        .enter()
	        .append('path')
	        .attr('d', path)
	        .attr('fill', d => {
	        	return d.properties.freed ? 'red' : d3.interpolateBrBG(d.properties.pop_est/1400000000);
	        });

	    function addFeature(type,coordinates,properties) {
			return {
				type: 'Feature',
				geometry: {
					type,
					coordinates
				},
				properties
			};
	    }
	</script>
</html>